{
  "version": 3,
  "sources": ["../../../../../../node_modules/@capacitor-firebase/app-check/dist/esm/web.js"],
  "sourcesContent": ["import { WebPlugin } from '@capacitor/core';\nimport { getApp } from 'firebase/app';\nimport { getToken, initializeAppCheck, onTokenChanged, setTokenAutoRefreshEnabled } from 'firebase/app-check';\nexport class FirebaseAppCheckWeb extends WebPlugin {\n  get appCheckInstance() {\n    return this._appCheckInstance;\n  }\n  set appCheckInstance(value) {\n    this._appCheckInstance = value;\n    if (value) {\n      this.registerOnTokenChangedListener();\n    } else {\n      this.unregisterOnTokenChangedListener();\n    }\n  }\n  async getToken(options) {\n    if (!this.appCheckInstance) {\n      throw new Error(FirebaseAppCheckWeb.errorNotInitialized);\n    }\n    const result = await getToken(this.appCheckInstance, options === null || options === void 0 ? void 0 : options.forceRefresh);\n    return {\n      token: result.token\n    };\n  }\n  async initialize(options) {\n    if (options === null || options === void 0 ? void 0 : options.debugToken) {\n      self.FIREBASE_APPCHECK_DEBUG_TOKEN = options.debugToken;\n    } else if (options === null || options === void 0 ? void 0 : options.debug) {\n      self.FIREBASE_APPCHECK_DEBUG_TOKEN = true;\n    }\n    let provider = options === null || options === void 0 ? void 0 : options.provider;\n    if (!provider) {\n      if (!(options === null || options === void 0 ? void 0 : options.siteKey)) {\n        throw new Error(FirebaseAppCheckWeb.errorSiteKeyMissing);\n      }\n      const {\n        ReCaptchaV3Provider\n      } = await import('firebase/app-check');\n      provider = new ReCaptchaV3Provider(options === null || options === void 0 ? void 0 : options.siteKey);\n    }\n    const app = getApp();\n    this.appCheckInstance = initializeAppCheck(app, {\n      provider,\n      isTokenAutoRefreshEnabled: options === null || options === void 0 ? void 0 : options.isTokenAutoRefreshEnabled\n    });\n  }\n  async setTokenAutoRefreshEnabled(options) {\n    if (!this.appCheckInstance) {\n      throw new Error(FirebaseAppCheckWeb.errorNotInitialized);\n    }\n    setTokenAutoRefreshEnabled(this.appCheckInstance, options.enabled);\n  }\n  registerOnTokenChangedListener() {\n    if (!this.appCheckInstance) {\n      return;\n    }\n    this.onTokenChangedListenerUnsubscribe = onTokenChanged(this.appCheckInstance, tokenResult => this.handleTokenChanged(tokenResult.token));\n  }\n  unregisterOnTokenChangedListener() {\n    if (this.onTokenChangedListenerUnsubscribe) {\n      this.onTokenChangedListenerUnsubscribe();\n    }\n  }\n  handleTokenChanged(token) {\n    const event = {\n      token\n    };\n    this.notifyListeners(FirebaseAppCheckWeb.tokenChangedEvent, event);\n  }\n}\nFirebaseAppCheckWeb.tokenChangedEvent = 'tokenChanged';\nFirebaseAppCheckWeb.errorNotInitialized = 'AppCheck has not been initialized.';\nFirebaseAppCheckWeb.errorSiteKeyMissing = 'siteKey must be provided.';\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAGO,IAAM,sBAAN,MAAM,6BAA4B,UAAU;AAAA,EACjD,IAAI,mBAAmB;AACrB,WAAO,KAAK;AAAA,EACd;AAAA,EACA,IAAI,iBAAiB,OAAO;AAC1B,SAAK,oBAAoB;AACzB,QAAI,OAAO;AACT,WAAK,+BAA+B;AAAA,IACtC,OAAO;AACL,WAAK,iCAAiC;AAAA,IACxC;AAAA,EACF;AAAA,EACM,SAAS,SAAS;AAAA;AACtB,UAAI,CAAC,KAAK,kBAAkB;AAC1B,cAAM,IAAI,MAAM,qBAAoB,mBAAmB;AAAA,MACzD;AACA,YAAM,SAAS,MAAM,SAAS,KAAK,kBAAkB,YAAY,QAAQ,YAAY,SAAS,SAAS,QAAQ,YAAY;AAC3H,aAAO;AAAA,QACL,OAAO,OAAO;AAAA,MAChB;AAAA,IACF;AAAA;AAAA,EACM,WAAW,SAAS;AAAA;AACxB,UAAI,YAAY,QAAQ,YAAY,SAAS,SAAS,QAAQ,YAAY;AACxE,aAAK,gCAAgC,QAAQ;AAAA,MAC/C,WAAW,YAAY,QAAQ,YAAY,SAAS,SAAS,QAAQ,OAAO;AAC1E,aAAK,gCAAgC;AAAA,MACvC;AACA,UAAI,WAAW,YAAY,QAAQ,YAAY,SAAS,SAAS,QAAQ;AACzE,UAAI,CAAC,UAAU;AACb,YAAI,EAAE,YAAY,QAAQ,YAAY,SAAS,SAAS,QAAQ,UAAU;AACxE,gBAAM,IAAI,MAAM,qBAAoB,mBAAmB;AAAA,QACzD;AACA,cAAM;AAAA,UACJ;AAAA,QACF,IAAI,MAAM,OAAO,yBAAoB;AACrC,mBAAW,IAAI,oBAAoB,YAAY,QAAQ,YAAY,SAAS,SAAS,QAAQ,OAAO;AAAA,MACtG;AACA,YAAM,MAAM,OAAO;AACnB,WAAK,mBAAmB,mBAAmB,KAAK;AAAA,QAC9C;AAAA,QACA,2BAA2B,YAAY,QAAQ,YAAY,SAAS,SAAS,QAAQ;AAAA,MACvF,CAAC;AAAA,IACH;AAAA;AAAA,EACM,2BAA2B,SAAS;AAAA;AACxC,UAAI,CAAC,KAAK,kBAAkB;AAC1B,cAAM,IAAI,MAAM,qBAAoB,mBAAmB;AAAA,MACzD;AACA,iCAA2B,KAAK,kBAAkB,QAAQ,OAAO;AAAA,IACnE;AAAA;AAAA,EACA,iCAAiC;AAC/B,QAAI,CAAC,KAAK,kBAAkB;AAC1B;AAAA,IACF;AACA,SAAK,oCAAoC,eAAe,KAAK,kBAAkB,iBAAe,KAAK,mBAAmB,YAAY,KAAK,CAAC;AAAA,EAC1I;AAAA,EACA,mCAAmC;AACjC,QAAI,KAAK,mCAAmC;AAC1C,WAAK,kCAAkC;AAAA,IACzC;AAAA,EACF;AAAA,EACA,mBAAmB,OAAO;AACxB,UAAM,QAAQ;AAAA,MACZ;AAAA,IACF;AACA,SAAK,gBAAgB,qBAAoB,mBAAmB,KAAK;AAAA,EACnE;AACF;AACA,oBAAoB,oBAAoB;AACxC,oBAAoB,sBAAsB;AAC1C,oBAAoB,sBAAsB;",
  "names": []
}
